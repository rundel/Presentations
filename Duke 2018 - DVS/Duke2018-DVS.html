<!DOCTYPE html>
<html>
  <head>
    <title>Tidying Hierarchical Data from the Web</title>
    <meta charset="utf-8">
    <meta name="author" content="Colin Rundel" />
    <meta name="date" content="2018-11-13" />
    <link rel="stylesheet" href="slides.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">

exclude: true



---
class: center, middle, inverse, title-slide

# Tidying Hierarchical Data from the Web

### Colin Rundel &lt;br/&gt; 2018-11-13

.lower-left-corner[ .small[ 
[http://bit.ly/Rundel-DVS](http://bit.ly/Rundel-DVS)
] ]


---
class: middle
count: false

# Getting Started

---

## R environments

We will be going through several live demos today and I will be making my code available as we go via a Dropbox link. 

It will likely be most useful for you to follow along by taking this code as it is produced and copying and pasting it to your own R session.

* For this to work well please make sure that you are running a reasonable current version of R (3.5.1 is the latest). 

* If you can't or don't want to update your local install, I highly recommend: 

    * [https://vm-manage.oit.duke.edu/containers](https://vm-manage.oit.duke.edu/containers)

---

## Packages

Everythign we are going to use today is either part of or a dependency of the `tidyverse` metapackage. If you don't have that installed, now is a good time to install it. (It is better to do it now since installation can take awhile)


```r
install.packages("tidyverse")
```

Additionally, even if you do have it installed now is also a good time to check that all of your packages are up-to-date.


```r
update.packages()
```

---

## My sessionInfo


```r
sessioninfo::package_info() %&gt;% .[.$attached,]
```

```
##  package  * version date       lib source        
##  dplyr    * 0.7.8   2018-11-10 [1] CRAN (R 3.5.1)
##  jsonlite * 1.5     2017-06-01 [1] CRAN (R 3.5.0)
##  purrr    * 0.2.5   2018-05-29 [1] CRAN (R 3.5.0)
##  rvest    * 0.3.2   2016-06-17 [1] CRAN (R 3.5.0)
##  xml2     * 1.2.0   2018-01-24 [1] CRAN (R 3.5.0)
## 
## [1] /usr/local/lib/R/3.5/site-library
## [2] /usr/local/Cellar/r/3.5.1/lib/R/library
```

---
class: middle
count: false

# Hierarchical Data?

---

## Web data - html

```html
&lt;html&gt;
  &lt;body&gt;
  
    &lt;div&gt;
      &lt;span class="title"&gt;The Cat in the Hat&lt;/span&gt;
      by &lt;span class="author"&gt;Dr. Seuss&lt;/span&gt;
      -  &lt;span class="price"&gt;$6.99&lt;/span&gt;
    &lt;/div&gt;
    
    &lt;div&gt;
      &lt;span class="title"&gt;Edgar Gets Ready for Bed&lt;/span&gt;
      by &lt;span class="author"&gt;Jennifer Adams&lt;/span&gt;, 
         &lt;span class="author"&gt;Ron Stucki&lt;/span&gt;
      -  &lt;span class="price"&gt;$9.99&lt;/span&gt;
    &lt;/div&gt;
    
    &lt;div&gt;
      &lt;span class="title"&gt;"More More More", Said the Baby&lt;/span&gt;
      by &lt;span class="author"&gt;Vera B Williams&lt;/span&gt;
      -  &lt;span class="price"&gt;$7.19&lt;/span&gt;
    &lt;/div&gt;

  &lt;/body&gt;
&lt;/html&gt;
```

---

## Web data - JSON

```json
{
  "bookList": [
    {
      "title": "The Cat in the Hat",
      "author": "Dr. Seuss",
      "price": 6.99
    },
    {
      "title": "Edgar Gets Ready for Bed",
      "author": ["Jennifer Adams", "Ron Stucki"],
      "price": 9.99
    },
    {
      "title": "\"More More More\", Said the Baby",
      "author": "Vera B Williams",
      "price": 7.19
    }
  ]
}
```

---

## Web data - XML

```xml
&lt;bookList&gt;
  &lt;book&gt;
    &lt;title&gt;The Cat in the Hat&lt;/title&gt;
    &lt;author&gt;Dr. Seuss&lt;/author&gt;
    &lt;price&gt;6.99&lt;/price&gt;
  &lt;/book&gt;
  &lt;book&gt;
    &lt;title&gt;Edgar Gets Ready for Bed&lt;/title&gt;
    &lt;author&gt;Jennifer Adams&lt;/author&gt;
    &lt;author&gt;Ron Stucki&lt;/author&gt;
    &lt;price&gt;9.99&lt;/price&gt;
  &lt;/book&gt;
  &lt;book&gt;
    &lt;title&gt;"More More More," Said the Baby&lt;/title&gt;
    &lt;author&gt;Vera B Williams&lt;/author&gt;
    &lt;price&gt;7.19&lt;/price&gt;
  &lt;/book&gt;
&lt;/bookList&gt;
```

---

## Tidy data

&lt;img src="imgs/tidy.png" width="100%" /&gt;

--


```
## # A tibble: 4 x 3
##   title                               author          price
##   &lt;chr&gt;                               &lt;chr&gt;           &lt;dbl&gt;
## 1 The Cat in the Hat                  Dr. Seuss        6.99
## 2 Edgar Gets Ready for Bed            Jennifer Adams   9.99
## 3 Edgar Gets Ready for Bed            Ron Stucki       9.99
## 4 "\"More More More,\" Said the Baby" Vera B Williams  7.19
```


.footnote[ 
From R4DS - [tidy data chapter](r4ds.had.co.nz/tidy-data.html), 
]

---
class: middle
count: false

# Motivating Examples

---

background-image: url(imgs/dennys_lq.jpeg)
background-position: center
background-color: #000000

---

background-image: url(imgs/dark_sky_api.png)
background-color: #30334A
background-position: top

---
class: middle
count: false

# Web Scraping

---

## rvest

.pull-left13[
&lt;img src="imgs/rvest.png" width="2941" /&gt;
]

.pull-right23[
`rvest` is a tidyverse package that makes basic processing and manipulation of HTML data straight forward. It wraps core functionality from the `xml2` package with a more user friendly interface, as such it can also be used for processing XML data.
]

&lt;br/&gt;

Core functions:

&lt;div&gt;
.pull-left[
* `read_html`
* `html_nodes`
* `html_table`
* `html_text`
]

.pull-right[
* `html_name`
* `html_attrs`
* `html_attr`
]

---

## html + rvest

```html
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;This is a title&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p align="center"&gt;Hello world!&lt;/p&gt;
    &lt;br/&gt;
    &lt;div class="name" id="first"&gt;John&lt;/div&gt;
    &lt;div class="name" id="last"&gt;Doe&lt;/div&gt;
    &lt;div class="contact"&gt;
      &lt;div class="home"&gt;555-555-1234&lt;/div&gt;
      &lt;div class="home"&gt;555-555-2345&lt;/div&gt;
      &lt;div class="work"&gt;555-555-9999&lt;/div&gt;
      &lt;div class="fax"&gt;555-555-8888&lt;/div&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
```




```r
read_html(html)
```

```
## {xml_document}
## &lt;html&gt;
## [1] &lt;head&gt;\n&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;\n&lt;title&gt;This is a ...
## [2] &lt;body&gt;\n    &lt;p align="center"&gt;Hello world!&lt;/p&gt;\n    &lt;br&gt;&lt;div class="name" id="first"&gt;John&lt;/di ...
```

---

## css selectors

We will be using a tool called **Selector Gadget** to help identify and extract the html elements / attributes of interest - it does this by interactively constructing a css selector using an example html document.

&lt;br/&gt;

.small[

Selector          |  Example         | Description
:-----------------|:-----------------|:--------------------------------------------------
element           |  `p`             | Select all &amp;lt;p&amp;gt; elements
element element   |  `div p`         | Select all &amp;lt;p&amp;gt; elements inside a &amp;lt;div&amp;gt; element
element&gt;element   |  `div &gt; p`       | Select all &amp;lt;p&amp;gt; elements with &amp;lt;div&amp;gt; as a parent
.class            |  `.title`        | Select all elements with class="title" attribute
#id               |  `#name`         | Select all elements with id="name" attribute
[attribute]       |  `[class]`       | Select all elements with a class attribute
[attribute=value] |  `[class=title]` | Select all elements with class="title"

]

---

## Selecting and Extracting

.small[
```html
...
&lt;p align="center"&gt;Hello world!&lt;/p&gt;
...
```
]



```r
read_html(html) %&gt;% html_nodes("p")
```

```
## {xml_nodeset (1)}
## [1] &lt;p align="center"&gt;Hello world!&lt;/p&gt;
```

--


```r
read_html(html) %&gt;% html_nodes("p") %&gt;% html_text()
```

```
## [1] "Hello world!"
```

--


```r
read_html(html) %&gt;% html_nodes("p") %&gt;% html_attrs()
```

```
## [[1]]
##    align 
## "center"
```

--


```r
read_html(html) %&gt;% html_nodes("p") %&gt;% html_attr("align")
```

```
## [1] "center"
```

---

## Nesting

.small[
```html
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;This is a title&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p align="center"&gt;Hello world!&lt;/p&gt;
    &lt;br/&gt;
    &lt;div class="name" id="first"&gt;John&lt;/div&gt;
    &lt;div class="name" id="last"&gt;Doe&lt;/div&gt;
    &lt;div class="contact"&gt;
      &lt;div class="home"&gt;555-555-1234&lt;/div&gt;
      &lt;div class="home"&gt;555-555-2345&lt;/div&gt;
      &lt;div class="work"&gt;555-555-9999&lt;/div&gt;
      &lt;div class="fax"&gt;555-555-8888&lt;/div&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
```
]



```r
read_html(html) %&gt;% html_nodes("body div")
```

```
## {xml_nodeset (7)}
## [1] &lt;div class="name" id="first"&gt;John&lt;/div&gt;
## [2] &lt;div class="name" id="last"&gt;Doe&lt;/div&gt;
## [3] &lt;div class="contact"&gt;\n      &lt;div class="home"&gt;555-555-1234&lt;/div&gt;\n      &lt;div class="home"&gt;55 ...
## [4] &lt;div class="home"&gt;555-555-1234&lt;/div&gt;
## [5] &lt;div class="home"&gt;555-555-2345&lt;/div&gt;
## [6] &lt;div class="work"&gt;555-555-9999&lt;/div&gt;
## [7] &lt;div class="fax"&gt;555-555-8888&lt;/div&gt;
```

---

## Nesting

.small[
```html
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;This is a title&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p align="center"&gt;Hello world!&lt;/p&gt;
    &lt;br/&gt;
    &lt;div class="name" id="first"&gt;John&lt;/div&gt;
    &lt;div class="name" id="last"&gt;Doe&lt;/div&gt;
    &lt;div class="contact"&gt;
      &lt;div class="home"&gt;555-555-1234&lt;/div&gt;
      &lt;div class="home"&gt;555-555-2345&lt;/div&gt;
      &lt;div class="work"&gt;555-555-9999&lt;/div&gt;
      &lt;div class="fax"&gt;555-555-8888&lt;/div&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
```
]


```r
read_html(html) %&gt;% html_nodes("body&gt;div")
```

```
## {xml_nodeset (3)}
## [1] &lt;div class="name" id="first"&gt;John&lt;/div&gt;
## [2] &lt;div class="name" id="last"&gt;Doe&lt;/div&gt;
## [3] &lt;div class="contact"&gt;\n      &lt;div class="home"&gt;555-555-1234&lt;/div&gt;\n      &lt;div class="home"&gt;55 ...
```

---

## Nesting

.small[
```html
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;This is a title&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p align="center"&gt;Hello world!&lt;/p&gt;
    &lt;br/&gt;
    &lt;div class="name" id="first"&gt;John&lt;/div&gt;
    &lt;div class="name" id="last"&gt;Doe&lt;/div&gt;
    &lt;div class="contact"&gt;
      &lt;div class="home"&gt;555-555-1234&lt;/div&gt;
      &lt;div class="home"&gt;555-555-2345&lt;/div&gt;
      &lt;div class="work"&gt;555-555-9999&lt;/div&gt;
      &lt;div class="fax"&gt;555-555-8888&lt;/div&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
```
]


```r
read_html(html) %&gt;% html_nodes("body div div")
```

```
## {xml_nodeset (4)}
## [1] &lt;div class="home"&gt;555-555-1234&lt;/div&gt;
## [2] &lt;div class="home"&gt;555-555-2345&lt;/div&gt;
## [3] &lt;div class="work"&gt;555-555-9999&lt;/div&gt;
## [4] &lt;div class="fax"&gt;555-555-8888&lt;/div&gt;
```

---

## classes and ids


```r
read_html(html) %&gt;% html_nodes(".name")
```

```
## {xml_nodeset (2)}
## [1] &lt;div class="name" id="first"&gt;John&lt;/div&gt;
## [2] &lt;div class="name" id="last"&gt;Doe&lt;/div&gt;
```

--



```r
read_html(html) %&gt;% html_nodes("div.name")
```

```
## {xml_nodeset (2)}
## [1] &lt;div class="name" id="first"&gt;John&lt;/div&gt;
## [2] &lt;div class="name" id="last"&gt;Doe&lt;/div&gt;
```

--


```r
read_html(html) %&gt;% html_nodes("#first")
```

```
## {xml_nodeset (1)}
## [1] &lt;div class="name" id="first"&gt;John&lt;/div&gt;
```

---

## SelectorGadget

Is a javascript scriptlet / Chrome extension that helps you interactively build a CSS selector for the content you are interested in.

&lt;center&gt;
&lt;img src='imgs/selectorgadget.png' width=500&gt; &lt;br/&gt;
&lt;a href='http://selectorgadget.com/'&gt;http://selectorgadget.com/&lt;/a&gt;
&lt;/center&gt;

---
class: middle

.center[
# Live Demo

## Putting `rvest` and `Selector Gadget` to work

#### [http://bit.ly/Rundel-DVS_dennys](http://bit.ly/Rundel-DVS_dennys)
]

---

class: middle
count: false

# Dark Sky API

---

## Dark Sky API Details

Go to https://darksky.net/dev and sign up for an account.

Every account gets up to 1000 free API calls / day which should be more than enough for our purposed today.

--

This API uses a **Re**presentational **S**tate **T**ransfer (REST) design, we can make two kinds of requests with this API.


* Forecast Request:
```url
https://api.darksky.net/forecast/{key}/{latitude},{longitude}
```

* Time Machine Request:
```url
https://api.darksky.net/forecast/{key}/{latitude},{longitude},{time}
```

---

## Durham Forecast results

The latitude and longitude of Durham, NC are 35.9940° N, 78.8986° W which means we need to request 
.small[https://api.darksky.net/forecast/24e13b35a014e3ca53a36a217243f61d/35.9940,-78.8986] &lt;br/&gt;
from the API.

--

The results look something like the following, where each `⊕` represents hidden nested values.
.small[
```json
{  
  "latitude":35.994,
  "longitude":-78.8986,
  "timezone":"America/New_York",
  "currently":{ ⊕ },
  "minutely":{ ⊕ },
  "hourly":{ ⊕  },
  "daily":{ ⊕ },
  "flags":{ ⊕ },
  "offset":-5
}
```
]

.footnote[Note - We can check our coordinates using google maps: https://www.google.com/maps?q=35.9940,-78.8986]

---

## jsonlite

To get things into R we can use the `jsonlite` package to directly read the url.


```r
durham = jsonlite::fromJSON(
  "https://api.darksky.net/forecast/24e13b35a014e3ca53a36a217243f61d/35.9940,-78.8986",
  simplifyDataFrame = FALSE
)
```


```r
str(durham)
```

```
## List of 9
##  $ latitude : num 36
##  $ longitude: num -78.9
##  $ timezone : chr "America/New_York"
##  $ currently:List of 18
##   ..$ time                : int 1542120235
##   ..$ summary             : chr "Mostly Cloudy"
##   ..$ icon                : chr "partly-cloudy-day"
##   ..$ nearestStormDistance: int 0
##   ..$ precipIntensity     : int 0
##   ..$ precipProbability   : int 0
##   ..$ temperature         : num 44.4
##   ..$ apparentTemperature : num 44.4
##   ..$ dewPoint            : num 44.4
##   ..$ humidity            : int 1
##   ..$ pressure            : num 1017
##   ..$ windSpeed           : num 1.98
##   ..$ windGust            : num 3.07
##   ..$ windBearing         : int 331
##   ..$ cloudCover          : num 0.87
##   ..$ uvIndex             : int 2
##   ..$ visibility          : num 8.94
##   ..$ ozone               : num 232
##  $ minutely :List of 3
##   ..$ summary: chr "Mostly cloudy for the hour."
##   ..$ icon   : chr "partly-cloudy-day"
##   ..$ data   :List of 61
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542120180
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542120240
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542120300
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542120360
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542120420
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542120480
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542120540
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542120600
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542120660
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542120720
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542120780
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542120840
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542120900
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542120960
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542121020
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542121080
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542121140
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542121200
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542121260
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542121320
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542121380
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542121440
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542121500
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542121560
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542121620
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542121680
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542121740
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542121800
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542121860
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542121920
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542121980
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542122040
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542122100
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542122160
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542122220
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542122280
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542122340
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542122400
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542122460
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542122520
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542122580
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542122640
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542122700
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542122760
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542122820
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542122880
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542122940
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542123000
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542123060
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542123120
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542123180
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542123240
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542123300
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542123360
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542123420
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542123480
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542123540
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542123600
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542123660
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542123720
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##   .. ..$ :List of 3
##   .. .. ..$ time             : int 1542123780
##   .. .. ..$ precipIntensity  : int 0
##   .. .. ..$ precipProbability: int 0
##  $ hourly   :List of 3
##   ..$ summary: chr "Light rain starting this afternoon, continuing until this evening."
##   ..$ icon   : chr "rain"
##   ..$ data   :List of 49
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542117600
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.008
##   .. .. ..$ precipProbability  : num 0.5
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 43.7
##   .. .. ..$ apparentTemperature: num 43.7
##   .. .. ..$ dewPoint           : num 43.7
##   .. .. ..$ humidity           : int 1
##   .. .. ..$ pressure           : num 1017
##   .. .. ..$ windSpeed          : num 2.14
##   .. .. ..$ windGust           : num 2.24
##   .. .. ..$ windBearing        : int 355
##   .. .. ..$ cloudCover         : num 0.98
##   .. .. ..$ uvIndex            : int 1
##   .. .. ..$ visibility         : num 8.51
##   .. .. ..$ ozone              : num 231
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542121200
##   .. .. ..$ summary            : chr "Mostly Cloudy"
##   .. .. ..$ icon               : chr "partly-cloudy-day"
##   .. .. ..$ precipIntensity    : num 0.0012
##   .. .. ..$ precipProbability  : num 0.4
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 44.7
##   .. .. ..$ apparentTemperature: num 44.7
##   .. .. ..$ dewPoint           : num 44.7
##   .. .. ..$ humidity           : int 1
##   .. .. ..$ pressure           : num 1017
##   .. .. ..$ windSpeed          : num 2.01
##   .. .. ..$ windGust           : num 3.38
##   .. .. ..$ windBearing        : int 321
##   .. .. ..$ cloudCover         : num 0.83
##   .. .. ..$ uvIndex            : int 2
##   .. .. ..$ visibility         : num 9.1
##   .. .. ..$ ozone              : num 232
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542124800
##   .. .. ..$ summary            : chr "Mostly Cloudy"
##   .. .. ..$ icon               : chr "partly-cloudy-day"
##   .. .. ..$ precipIntensity    : num 0.0057
##   .. .. ..$ precipProbability  : num 0.36
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 45.8
##   .. .. ..$ apparentTemperature: num 45.8
##   .. .. ..$ dewPoint           : num 45.8
##   .. .. ..$ humidity           : int 1
##   .. .. ..$ pressure           : num 1017
##   .. .. ..$ windSpeed          : num 2.79
##   .. .. ..$ windGust           : num 6.09
##   .. .. ..$ windBearing        : int 335
##   .. .. ..$ cloudCover         : num 0.81
##   .. .. ..$ uvIndex            : int 3
##   .. .. ..$ visibility         : num 9.2
##   .. .. ..$ ozone              : num 233
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542128400
##   .. .. ..$ summary            : chr "Mostly Cloudy"
##   .. .. ..$ icon               : chr "partly-cloudy-day"
##   .. .. ..$ precipIntensity    : num 0.0144
##   .. .. ..$ precipProbability  : num 0.42
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 46.4
##   .. .. ..$ apparentTemperature: num 45.2
##   .. .. ..$ dewPoint           : num 46.4
##   .. .. ..$ humidity           : int 1
##   .. .. ..$ pressure           : num 1017
##   .. .. ..$ windSpeed          : num 3.45
##   .. .. ..$ windGust           : num 8.26
##   .. .. ..$ windBearing        : int 299
##   .. .. ..$ cloudCover         : num 0.83
##   .. .. ..$ uvIndex            : int 3
##   .. .. ..$ visibility         : num 8.65
##   .. .. ..$ ozone              : num 234
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542132000
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.0128
##   .. .. ..$ precipProbability  : num 0.37
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 47.3
##   .. .. ..$ apparentTemperature: num 46.5
##   .. .. ..$ dewPoint           : num 47.3
##   .. .. ..$ humidity           : int 1
##   .. .. ..$ pressure           : num 1017
##   .. .. ..$ windSpeed          : num 3.05
##   .. .. ..$ windGust           : num 6.06
##   .. .. ..$ windBearing        : int 303
##   .. .. ..$ cloudCover         : num 0.98
##   .. .. ..$ uvIndex            : int 3
##   .. .. ..$ visibility         : num 8.16
##   .. .. ..$ ozone              : num 234
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542135600
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.025
##   .. .. ..$ precipProbability  : num 0.57
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 48.1
##   .. .. ..$ apparentTemperature: num 46.9
##   .. .. ..$ dewPoint           : num 48.1
##   .. .. ..$ humidity           : int 1
##   .. .. ..$ pressure           : num 1018
##   .. .. ..$ windSpeed          : num 3.67
##   .. .. ..$ windGust           : num 7.49
##   .. .. ..$ windBearing        : int 302
##   .. .. ..$ cloudCover         : num 0.98
##   .. .. ..$ uvIndex            : int 2
##   .. .. ..$ visibility         : num 7.74
##   .. .. ..$ ozone              : num 234
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542139200
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.0248
##   .. .. ..$ precipProbability  : num 0.64
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 48.3
##   .. .. ..$ apparentTemperature: num 47.3
##   .. .. ..$ dewPoint           : num 48.3
##   .. .. ..$ humidity           : int 1
##   .. .. ..$ pressure           : num 1018
##   .. .. ..$ windSpeed          : num 3.52
##   .. .. ..$ windGust           : num 8.45
##   .. .. ..$ windBearing        : int 333
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 1
##   .. .. ..$ visibility         : num 7.69
##   .. .. ..$ ozone              : num 233
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542142800
##   .. .. ..$ summary            : chr "Light Rain"
##   .. .. ..$ icon               : chr "rain"
##   .. .. ..$ precipIntensity    : num 0.0251
##   .. .. ..$ precipProbability  : num 0.66
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 48.7
##   .. .. ..$ apparentTemperature: num 47.7
##   .. .. ..$ dewPoint           : num 48.7
##   .. .. ..$ humidity           : int 1
##   .. .. ..$ pressure           : num 1018
##   .. .. ..$ windSpeed          : num 3.67
##   .. .. ..$ windGust           : num 8.72
##   .. .. ..$ windBearing        : int 335
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : num 7.92
##   .. .. ..$ ozone              : num 233
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542146400
##   .. .. ..$ summary            : chr "Light Rain"
##   .. .. ..$ icon               : chr "rain"
##   .. .. ..$ precipIntensity    : num 0.023
##   .. .. ..$ precipProbability  : num 0.68
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 48.8
##   .. .. ..$ apparentTemperature: num 47.7
##   .. .. ..$ dewPoint           : num 48.8
##   .. .. ..$ humidity           : int 1
##   .. .. ..$ pressure           : num 1019
##   .. .. ..$ windSpeed          : num 3.63
##   .. .. ..$ windGust           : num 9.09
##   .. .. ..$ windBearing        : int 331
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : num 8.24
##   .. .. ..$ ozone              : num 234
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542150000
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.0159
##   .. .. ..$ precipProbability  : num 0.62
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 48.8
##   .. .. ..$ apparentTemperature: num 47
##   .. .. ..$ dewPoint           : num 48.8
##   .. .. ..$ humidity           : int 1
##   .. .. ..$ pressure           : num 1020
##   .. .. ..$ windSpeed          : num 4.68
##   .. .. ..$ windGust           : num 11.4
##   .. .. ..$ windBearing        : int 328
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : num 8.74
##   .. .. ..$ ozone              : num 235
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542153600
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.0151
##   .. .. ..$ precipProbability  : num 0.57
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 48.5
##   .. .. ..$ apparentTemperature: num 46.3
##   .. .. ..$ dewPoint           : num 48.5
##   .. .. ..$ humidity           : int 1
##   .. .. ..$ pressure           : num 1021
##   .. .. ..$ windSpeed          : num 5.39
##   .. .. ..$ windGust           : num 13.1
##   .. .. ..$ windBearing        : int 341
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : num 9.41
##   .. .. ..$ ozone              : num 237
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542157200
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.0104
##   .. .. ..$ precipProbability  : num 0.46
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 48.1
##   .. .. ..$ apparentTemperature: num 45.6
##   .. .. ..$ dewPoint           : num 47.7
##   .. .. ..$ humidity           : num 0.98
##   .. .. ..$ pressure           : num 1022
##   .. .. ..$ windSpeed          : num 5.6
##   .. .. ..$ windGust           : num 13.6
##   .. .. ..$ windBearing        : int 342
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : int 10
##   .. .. ..$ ozone              : num 238
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542160800
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.0045
##   .. .. ..$ precipProbability  : num 0.2
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 47.7
##   .. .. ..$ apparentTemperature: num 44.1
##   .. .. ..$ dewPoint           : num 45.9
##   .. .. ..$ humidity           : num 0.94
##   .. .. ..$ pressure           : num 1023
##   .. .. ..$ windSpeed          : num 7.61
##   .. .. ..$ windGust           : num 18.9
##   .. .. ..$ windBearing        : int 346
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : int 10
##   .. .. ..$ ozone              : num 239
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542164400
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.0021
##   .. .. ..$ precipProbability  : num 0.07
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 46.8
##   .. .. ..$ apparentTemperature: num 42.5
##   .. .. ..$ dewPoint           : num 43.9
##   .. .. ..$ humidity           : num 0.9
##   .. .. ..$ pressure           : num 1024
##   .. .. ..$ windSpeed          : num 8.72
##   .. .. ..$ windGust           : num 21.6
##   .. .. ..$ windBearing        : int 349
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : int 10
##   .. .. ..$ ozone              : num 240
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542168000
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.0023
##   .. .. ..$ precipProbability  : num 0.07
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 45.5
##   .. .. ..$ apparentTemperature: num 40.9
##   .. .. ..$ dewPoint           : num 42.6
##   .. .. ..$ humidity           : num 0.89
##   .. .. ..$ pressure           : num 1024
##   .. .. ..$ windSpeed          : num 8.94
##   .. .. ..$ windGust           : num 18.3
##   .. .. ..$ windBearing        : int 351
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : int 10
##   .. .. ..$ ozone              : num 241
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542171600
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.0025
##   .. .. ..$ precipProbability  : num 0.06
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 44.7
##   .. .. ..$ apparentTemperature: num 40
##   .. .. ..$ dewPoint           : num 41.4
##   .. .. ..$ humidity           : num 0.88
##   .. .. ..$ pressure           : num 1024
##   .. .. ..$ windSpeed          : num 8.72
##   .. .. ..$ windGust           : num 17.4
##   .. .. ..$ windBearing        : int 351
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : int 10
##   .. .. ..$ ozone              : num 242
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542175200
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.0024
##   .. .. ..$ precipProbability  : num 0.05
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 44
##   .. .. ..$ apparentTemperature: num 39.3
##   .. .. ..$ dewPoint           : num 40.3
##   .. .. ..$ humidity           : num 0.87
##   .. .. ..$ pressure           : num 1025
##   .. .. ..$ windSpeed          : num 8.44
##   .. .. ..$ windGust           : num 16.9
##   .. .. ..$ windBearing        : int 353
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : int 10
##   .. .. ..$ ozone              : num 242
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542178800
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.0016
##   .. .. ..$ precipProbability  : num 0.03
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 43.5
##   .. .. ..$ apparentTemperature: num 38.8
##   .. .. ..$ dewPoint           : num 39.4
##   .. .. ..$ humidity           : num 0.85
##   .. .. ..$ pressure           : num 1025
##   .. .. ..$ windSpeed          : num 8.21
##   .. .. ..$ windGust           : num 16.9
##   .. .. ..$ windBearing        : int 356
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : int 10
##   .. .. ..$ ozone              : num 243
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542182400
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.0012
##   .. .. ..$ precipProbability  : num 0.03
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 43
##   .. .. ..$ apparentTemperature: num 38.3
##   .. .. ..$ dewPoint           : num 38.7
##   .. .. ..$ humidity           : num 0.85
##   .. .. ..$ pressure           : num 1026
##   .. .. ..$ windSpeed          : num 7.93
##   .. .. ..$ windGust           : num 17.3
##   .. .. ..$ windBearing        : int 2
##   .. .. ..$ cloudCover         : num 0.99
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : int 10
##   .. .. ..$ ozone              : num 244
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542186000
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.0013
##   .. .. ..$ precipProbability  : num 0.03
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 42.4
##   .. .. ..$ apparentTemperature: num 37.6
##   .. .. ..$ dewPoint           : num 38
##   .. .. ..$ humidity           : num 0.84
##   .. .. ..$ pressure           : num 1027
##   .. .. ..$ windSpeed          : num 7.75
##   .. .. ..$ windGust           : num 17.7
##   .. .. ..$ windBearing        : int 6
##   .. .. ..$ cloudCover         : num 0.98
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : int 10
##   .. .. ..$ ozone              : num 245
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542189600
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.0012
##   .. .. ..$ precipProbability  : num 0.03
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 41.6
##   .. .. ..$ apparentTemperature: num 36.7
##   .. .. ..$ dewPoint           : num 37.5
##   .. .. ..$ humidity           : num 0.85
##   .. .. ..$ pressure           : num 1028
##   .. .. ..$ windSpeed          : num 7.71
##   .. .. ..$ windGust           : num 18.3
##   .. .. ..$ windBearing        : int 14
##   .. .. ..$ cloudCover         : num 0.99
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : int 10
##   .. .. ..$ ozone              : num 246
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542193200
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.001
##   .. .. ..$ precipProbability  : num 0.03
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 40.5
##   .. .. ..$ apparentTemperature: num 35.4
##   .. .. ..$ dewPoint           : num 37
##   .. .. ..$ humidity           : num 0.87
##   .. .. ..$ pressure           : num 1028
##   .. .. ..$ windSpeed          : num 7.76
##   .. .. ..$ windGust           : num 19
##   .. .. ..$ windBearing        : int 22
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : int 10
##   .. .. ..$ ozone              : num 248
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542196800
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 8e-04
##   .. .. ..$ precipProbability  : num 0.03
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 39.2
##   .. .. ..$ apparentTemperature: num 33.6
##   .. .. ..$ dewPoint           : num 36.3
##   .. .. ..$ humidity           : num 0.89
##   .. .. ..$ pressure           : num 1029
##   .. .. ..$ windSpeed          : num 7.98
##   .. .. ..$ windGust           : num 19.4
##   .. .. ..$ windBearing        : int 28
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : int 10
##   .. .. ..$ ozone              : num 250
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542200400
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 8e-04
##   .. .. ..$ precipProbability  : num 0.02
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 37.8
##   .. .. ..$ apparentTemperature: num 31.5
##   .. .. ..$ dewPoint           : num 35
##   .. .. ..$ humidity           : num 0.9
##   .. .. ..$ pressure           : num 1030
##   .. .. ..$ windSpeed          : num 8.61
##   .. .. ..$ windGust           : num 19.2
##   .. .. ..$ windBearing        : int 33
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : int 10
##   .. .. ..$ ozone              : num 251
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542204000
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 7e-04
##   .. .. ..$ precipProbability  : num 0.02
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 37.5
##   .. .. ..$ apparentTemperature: num 30.8
##   .. .. ..$ dewPoint           : num 33.5
##   .. .. ..$ humidity           : num 0.85
##   .. .. ..$ pressure           : num 1030
##   .. .. ..$ windSpeed          : num 9.43
##   .. .. ..$ windGust           : num 18.7
##   .. .. ..$ windBearing        : int 38
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 1
##   .. .. ..$ visibility         : int 10
##   .. .. ..$ ozone              : num 252
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542207600
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 6e-04
##   .. .. ..$ precipProbability  : num 0.02
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 38
##   .. .. ..$ apparentTemperature: num 31.3
##   .. .. ..$ dewPoint           : num 32.2
##   .. .. ..$ humidity           : num 0.79
##   .. .. ..$ pressure           : num 1031
##   .. .. ..$ windSpeed          : num 9.92
##   .. .. ..$ windGust           : num 18.1
##   .. .. ..$ windBearing        : int 40
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 2
##   .. .. ..$ visibility         : int 10
##   .. .. ..$ ozone              : num 253
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542211200
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 5e-04
##   .. .. ..$ precipProbability  : num 0.02
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 39.5
##   .. .. ..$ apparentTemperature: num 33
##   .. .. ..$ dewPoint           : num 31.1
##   .. .. ..$ humidity           : num 0.72
##   .. .. ..$ pressure           : num 1031
##   .. .. ..$ windSpeed          : num 9.85
##   .. .. ..$ windGust           : num 17.4
##   .. .. ..$ windBearing        : int 41
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 3
##   .. .. ..$ visibility         : int 10
##   .. .. ..$ ozone              : num 254
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542214800
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 4e-04
##   .. .. ..$ precipProbability  : num 0.01
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 40.7
##   .. .. ..$ apparentTemperature: num 34.7
##   .. .. ..$ dewPoint           : num 30.1
##   .. .. ..$ humidity           : num 0.66
##   .. .. ..$ pressure           : num 1031
##   .. .. ..$ windSpeed          : num 9.46
##   .. .. ..$ windGust           : num 16.6
##   .. .. ..$ windBearing        : int 40
##   .. .. ..$ cloudCover         : num 0.99
##   .. .. ..$ uvIndex            : int 3
##   .. .. ..$ visibility         : int 10
##   .. .. ..$ ozone              : num 253
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542218400
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 4e-04
##   .. .. ..$ precipProbability  : num 0.01
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 41.4
##   .. .. ..$ apparentTemperature: num 35.8
##   .. .. ..$ dewPoint           : num 29.3
##   .. .. ..$ humidity           : num 0.62
##   .. .. ..$ pressure           : num 1031
##   .. .. ..$ windSpeed          : num 9.1
##   .. .. ..$ windGust           : num 16
##   .. .. ..$ windBearing        : int 40
##   .. .. ..$ cloudCover         : num 0.99
##   .. .. ..$ uvIndex            : int 3
##   .. .. ..$ visibility         : int 10
##   .. .. ..$ ozone              : num 253
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542222000
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 7e-04
##   .. .. ..$ precipProbability  : num 0.02
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 41.1
##   .. .. ..$ apparentTemperature: num 35.6
##   .. .. ..$ dewPoint           : num 28.8
##   .. .. ..$ humidity           : num 0.61
##   .. .. ..$ pressure           : num 1031
##   .. .. ..$ windSpeed          : num 8.83
##   .. .. ..$ windGust           : num 15.8
##   .. .. ..$ windBearing        : int 41
##   .. .. ..$ cloudCover         : num 0.99
##   .. .. ..$ uvIndex            : int 2
##   .. .. ..$ visibility         : int 10
##   .. .. ..$ ozone              : num 253
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542225600
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.0012
##   .. .. ..$ precipProbability  : num 0.03
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 40.9
##   .. .. ..$ apparentTemperature: num 35.4
##   .. .. ..$ dewPoint           : num 28.6
##   .. .. ..$ humidity           : num 0.61
##   .. .. ..$ pressure           : num 1030
##   .. .. ..$ windSpeed          : num 8.55
##   .. .. ..$ windGust           : num 15.9
##   .. .. ..$ windBearing        : int 42
##   .. .. ..$ cloudCover         : num 0.99
##   .. .. ..$ uvIndex            : int 1
##   .. .. ..$ visibility         : int 10
##   .. .. ..$ ozone              : num 252
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542229200
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.0019
##   .. .. ..$ precipProbability  : num 0.03
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 40.4
##   .. .. ..$ apparentTemperature: num 34.9
##   .. .. ..$ dewPoint           : num 28.4
##   .. .. ..$ humidity           : num 0.62
##   .. .. ..$ pressure           : num 1030
##   .. .. ..$ windSpeed          : num 8.39
##   .. .. ..$ windGust           : num 16.7
##   .. .. ..$ windBearing        : int 43
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : int 10
##   .. .. ..$ ozone              : num 252
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542232800
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.0028
##   .. .. ..$ precipProbability  : num 0.04
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 40
##   .. .. ..$ apparentTemperature: num 34.4
##   .. .. ..$ dewPoint           : num 28.3
##   .. .. ..$ humidity           : num 0.63
##   .. .. ..$ pressure           : num 1030
##   .. .. ..$ windSpeed          : num 8.36
##   .. .. ..$ windGust           : num 18.8
##   .. .. ..$ windBearing        : int 45
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : int 10
##   .. .. ..$ ozone              : num 253
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542236400
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.0045
##   .. .. ..$ precipProbability  : num 0.04
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 39.4
##   .. .. ..$ apparentTemperature: num 33.6
##   .. .. ..$ dewPoint           : num 28.3
##   .. .. ..$ humidity           : num 0.64
##   .. .. ..$ pressure           : num 1030
##   .. .. ..$ windSpeed          : num 8.44
##   .. .. ..$ windGust           : num 21.6
##   .. .. ..$ windBearing        : int 47
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : num 9.53
##   .. .. ..$ ozone              : num 254
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542240000
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.0065
##   .. .. ..$ precipProbability  : num 0.07
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 38.8
##   .. .. ..$ apparentTemperature: num 32.8
##   .. .. ..$ dewPoint           : num 28.4
##   .. .. ..$ humidity           : num 0.66
##   .. .. ..$ pressure           : num 1031
##   .. .. ..$ windSpeed          : num 8.62
##   .. .. ..$ windGust           : num 23.6
##   .. .. ..$ windBearing        : int 49
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : num 8.94
##   .. .. ..$ ozone              : num 255
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542243600
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.008
##   .. .. ..$ precipProbability  : num 0.1
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 38.4
##   .. .. ..$ apparentTemperature: num 32.1
##   .. .. ..$ dewPoint           : num 28.7
##   .. .. ..$ humidity           : num 0.68
##   .. .. ..$ pressure           : num 1031
##   .. .. ..$ windSpeed          : num 8.95
##   .. .. ..$ windGust           : num 23.9
##   .. .. ..$ windBearing        : int 50
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : num 8.75
##   .. .. ..$ ozone              : num 256
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542247200
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.0106
##   .. .. ..$ precipProbability  : num 0.13
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 38
##   .. .. ..$ apparentTemperature: num 31.4
##   .. .. ..$ dewPoint           : num 29
##   .. .. ..$ humidity           : num 0.7
##   .. .. ..$ pressure           : num 1031
##   .. .. ..$ windSpeed          : num 9.43
##   .. .. ..$ windGust           : num 23.3
##   .. .. ..$ windBearing        : int 50
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : num 8.69
##   .. .. ..$ ozone              : num 257
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542250800
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.0153
##   .. .. ..$ precipProbability  : num 0.16
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 37.5
##   .. .. ..$ apparentTemperature: num 30.6
##   .. .. ..$ dewPoint           : num 29.4
##   .. .. ..$ humidity           : num 0.72
##   .. .. ..$ pressure           : num 1031
##   .. .. ..$ windSpeed          : num 9.92
##   .. .. ..$ windGust           : num 23.2
##   .. .. ..$ windBearing        : int 49
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : num 8.11
##   .. .. ..$ ozone              : num 258
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542254400
##   .. .. ..$ summary            : chr "Overcast"
##   .. .. ..$ icon               : chr "cloudy"
##   .. .. ..$ precipIntensity    : num 0.023
##   .. .. ..$ precipProbability  : num 0.22
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 37.2
##   .. .. ..$ apparentTemperature: num 29.9
##   .. .. ..$ dewPoint           : num 29.9
##   .. .. ..$ humidity           : num 0.75
##   .. .. ..$ pressure           : num 1031
##   .. .. ..$ windSpeed          : num 10.5
##   .. .. ..$ windGust           : num 24.3
##   .. .. ..$ windBearing        : int 49
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : num 6.41
##   .. .. ..$ ozone              : num 259
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542258000
##   .. .. ..$ summary            : chr "Light Rain"
##   .. .. ..$ icon               : chr "rain"
##   .. .. ..$ precipIntensity    : num 0.0363
##   .. .. ..$ precipProbability  : num 0.32
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 36.7
##   .. .. ..$ apparentTemperature: num 29.1
##   .. .. ..$ dewPoint           : num 30.4
##   .. .. ..$ humidity           : num 0.78
##   .. .. ..$ pressure           : num 1031
##   .. .. ..$ windSpeed          : num 11.1
##   .. .. ..$ windGust           : num 25.9
##   .. .. ..$ windBearing        : int 48
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : num 4.19
##   .. .. ..$ ozone              : num 260
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542261600
##   .. .. ..$ summary            : chr "Light Rain"
##   .. .. ..$ icon               : chr "rain"
##   .. .. ..$ precipIntensity    : num 0.0508
##   .. .. ..$ precipProbability  : num 0.45
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 36.4
##   .. .. ..$ apparentTemperature: num 28.5
##   .. .. ..$ dewPoint           : num 30.9
##   .. .. ..$ humidity           : num 0.8
##   .. .. ..$ pressure           : num 1030
##   .. .. ..$ windSpeed          : num 11.6
##   .. .. ..$ windGust           : num 27.3
##   .. .. ..$ windBearing        : int 46
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : num 2.57
##   .. .. ..$ ozone              : num 261
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542265200
##   .. .. ..$ summary            : chr "Rain"
##   .. .. ..$ icon               : chr "rain"
##   .. .. ..$ precipIntensity    : num 0.0597
##   .. .. ..$ precipProbability  : num 0.54
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 36.2
##   .. .. ..$ apparentTemperature: num 28.1
##   .. .. ..$ dewPoint           : num 31.6
##   .. .. ..$ humidity           : num 0.83
##   .. .. ..$ pressure           : num 1029
##   .. .. ..$ windSpeed          : num 11.9
##   .. .. ..$ windGust           : num 28.6
##   .. .. ..$ windBearing        : int 44
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : num 2.1
##   .. .. ..$ ozone              : num 262
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542268800
##   .. .. ..$ summary            : chr "Rain"
##   .. .. ..$ icon               : chr "rain"
##   .. .. ..$ precipIntensity    : num 0.066
##   .. .. ..$ precipProbability  : num 0.59
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 36.1
##   .. .. ..$ apparentTemperature: num 27.8
##   .. .. ..$ dewPoint           : num 32.3
##   .. .. ..$ humidity           : num 0.86
##   .. .. ..$ pressure           : num 1028
##   .. .. ..$ windSpeed          : num 12.3
##   .. .. ..$ windGust           : num 30
##   .. .. ..$ windBearing        : int 41
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : num 2.29
##   .. .. ..$ ozone              : num 262
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542272400
##   .. .. ..$ summary            : chr "Rain"
##   .. .. ..$ icon               : chr "rain"
##   .. .. ..$ precipIntensity    : num 0.0744
##   .. .. ..$ precipProbability  : num 0.66
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 35.7
##   .. .. ..$ apparentTemperature: num 27.1
##   .. .. ..$ dewPoint           : num 33
##   .. .. ..$ humidity           : num 0.9
##   .. .. ..$ pressure           : num 1027
##   .. .. ..$ windSpeed          : num 12.8
##   .. .. ..$ windGust           : num 31.3
##   .. .. ..$ windBearing        : int 39
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : num 2.49
##   .. .. ..$ ozone              : num 263
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542276000
##   .. .. ..$ summary            : chr "Rain"
##   .. .. ..$ icon               : chr "rain"
##   .. .. ..$ precipIntensity    : num 0.0895
##   .. .. ..$ precipProbability  : num 0.73
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 35
##   .. .. ..$ apparentTemperature: num 26
##   .. .. ..$ dewPoint           : num 33.7
##   .. .. ..$ humidity           : num 0.95
##   .. .. ..$ pressure           : num 1025
##   .. .. ..$ windSpeed          : num 13.5
##   .. .. ..$ windGust           : num 32.6
##   .. .. ..$ windBearing        : int 39
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : num 2.32
##   .. .. ..$ ozone              : num 265
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542279600
##   .. .. ..$ summary            : chr "Rain"
##   .. .. ..$ icon               : chr "rain"
##   .. .. ..$ precipIntensity    : num 0.112
##   .. .. ..$ precipProbability  : num 0.77
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 34.3
##   .. .. ..$ apparentTemperature: num 24.8
##   .. .. ..$ dewPoint           : num 34.2
##   .. .. ..$ humidity           : int 1
##   .. .. ..$ pressure           : num 1024
##   .. .. ..$ windSpeed          : num 14.3
##   .. .. ..$ windGust           : num 33.6
##   .. .. ..$ windBearing        : int 41
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : num 2.12
##   .. .. ..$ ozone              : num 266
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542283200
##   .. .. ..$ summary            : chr "Rain"
##   .. .. ..$ icon               : chr "rain"
##   .. .. ..$ precipIntensity    : num 0.131
##   .. .. ..$ precipProbability  : num 0.8
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 33.8
##   .. .. ..$ apparentTemperature: num 24
##   .. .. ..$ dewPoint           : num 33.8
##   .. .. ..$ humidity           : int 1
##   .. .. ..$ pressure           : num 1023
##   .. .. ..$ windSpeed          : num 14.8
##   .. .. ..$ windGust           : num 34.2
##   .. .. ..$ windBearing        : int 41
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : num 2.08
##   .. .. ..$ ozone              : num 268
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542286800
##   .. .. ..$ summary            : chr "Rain and Breezy"
##   .. .. ..$ icon               : chr "rain"
##   .. .. ..$ precipIntensity    : num 0.14
##   .. .. ..$ precipProbability  : num 0.83
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 34.1
##   .. .. ..$ apparentTemperature: num 24.2
##   .. .. ..$ dewPoint           : num 34.1
##   .. .. ..$ humidity           : int 1
##   .. .. ..$ pressure           : num 1022
##   .. .. ..$ windSpeed          : num 15
##   .. .. ..$ windGust           : num 34.7
##   .. .. ..$ windBearing        : int 43
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 0
##   .. .. ..$ visibility         : num 2.34
##   .. .. ..$ ozone              : num 269
##   .. ..$ :List of 18
##   .. .. ..$ time               : int 1542290400
##   .. .. ..$ summary            : chr "Rain and Breezy"
##   .. .. ..$ icon               : chr "rain"
##   .. .. ..$ precipIntensity    : num 0.147
##   .. .. ..$ precipProbability  : num 0.86
##   .. .. ..$ precipType         : chr "rain"
##   .. .. ..$ temperature        : num 35.5
##   .. .. ..$ apparentTemperature: num 26
##   .. .. ..$ dewPoint           : num 35.5
##   .. .. ..$ humidity           : int 1
##   .. .. ..$ pressure           : num 1021
##   .. .. ..$ windSpeed          : num 15.1
##   .. .. ..$ windGust           : num 34.7
##   .. .. ..$ windBearing        : int 46
##   .. .. ..$ cloudCover         : int 1
##   .. .. ..$ uvIndex            : int 1
##   .. .. ..$ visibility         : num 2.75
##   .. .. ..$ ozone              : num 269
##  $ daily    :List of 3
##   ..$ summary: chr "Rain today through Thursday, with high temperatures bottoming out at 42°F on Thursday."
##   ..$ icon   : chr "rain"
##   ..$ data   :List of 8
##   .. ..$ :List of 39
##   .. .. ..$ time                       : int 1542085200
##   .. .. ..$ summary                    : chr "Light rain starting in the afternoon, continuing until evening."
##   .. .. ..$ icon                       : chr "rain"
##   .. .. ..$ sunriseTime                : int 1542109902
##   .. .. ..$ sunsetTime                 : int 1542147054
##   .. .. ..$ moonPhase                  : num 0.19
##   .. .. ..$ precipIntensity            : num 0.0559
##   .. .. ..$ precipIntensityMax         : num 0.403
##   .. .. ..$ precipIntensityMaxTime     : int 1542088800
##   .. .. ..$ precipProbability          : int 1
##   .. .. ..$ precipType                 : chr "rain"
##   .. .. ..$ temperatureHigh            : num 48.8
##   .. .. ..$ temperatureHighTime        : int 1542150000
##   .. .. ..$ temperatureLow             : num 37.8
##   .. .. ..$ temperatureLowTime         : int 1542200400
##   .. .. ..$ apparentTemperatureHigh    : num 47.7
##   .. .. ..$ apparentTemperatureHighTime: int 1542146400
##   .. .. ..$ apparentTemperatureLow     : num 31.5
##   .. .. ..$ apparentTemperatureLowTime : int 1542200400
##   .. .. ..$ dewPoint                   : num 45.8
##   .. .. ..$ humidity                   : num 0.98
##   .. .. ..$ pressure                   : num 1018
##   .. .. ..$ windSpeed                  : num 3.91
##   .. .. ..$ windGust                   : num 21.6
##   .. .. ..$ windGustTime               : int 1542164400
##   .. .. ..$ windBearing                : int 330
##   .. .. ..$ cloudCover                 : num 0.97
##   .. .. ..$ uvIndex                    : int 3
##   .. .. ..$ uvIndexTime                : int 1542124800
##   .. .. ..$ visibility                 : num 7.78
##   .. .. ..$ ozone                      : num 233
##   .. .. ..$ temperatureMin             : num 42.5
##   .. .. ..$ temperatureMinTime         : int 1542110400
##   .. .. ..$ temperatureMax             : num 48.8
##   .. .. ..$ temperatureMaxTime         : int 1542150000
##   .. .. ..$ apparentTemperatureMin     : num 40.9
##   .. .. ..$ apparentTemperatureMinTime : int 1542168000
##   .. .. ..$ apparentTemperatureMax     : num 47.7
##   .. .. ..$ apparentTemperatureMaxTime : int 1542146400
##   .. ..$ :List of 39
##   .. .. ..$ time                       : int 1542171600
##   .. .. ..$ summary                    : chr "Rain overnight."
##   .. .. ..$ icon                       : chr "rain"
##   .. .. ..$ sunriseTime                : int 1542196363
##   .. .. ..$ sunsetTime                 : int 1542233412
##   .. .. ..$ moonPhase                  : num 0.22
##   .. .. ..$ precipIntensity            : num 0.0037
##   .. .. ..$ precipIntensityMax         : num 0.023
##   .. .. ..$ precipIntensityMaxTime     : int 1542254400
##   .. .. ..$ precipProbability          : num 0.51
##   .. .. ..$ precipType                 : chr "rain"
##   .. .. ..$ temperatureHigh            : num 41.4
##   .. .. ..$ temperatureHighTime        : int 1542218400
##   .. .. ..$ temperatureLow             : num 33.8
##   .. .. ..$ temperatureLowTime         : int 1542283200
##   .. .. ..$ apparentTemperatureHigh    : num 35.8
##   .. .. ..$ apparentTemperatureHighTime: int 1542218400
##   .. .. ..$ apparentTemperatureLow     : num 24
##   .. .. ..$ apparentTemperatureLowTime : int 1542283200
##   .. .. ..$ dewPoint                   : num 32.8
##   .. .. ..$ humidity                   : num 0.75
##   .. .. ..$ pressure                   : num 1029
##   .. .. ..$ windSpeed                  : num 8.31
##   .. .. ..$ windGust                   : num 24.3
##   .. .. ..$ windGustTime               : int 1542254400
##   .. .. ..$ windBearing                : int 32
##   .. .. ..$ cloudCover                 : int 1
##   .. .. ..$ uvIndex                    : int 3
##   .. .. ..$ uvIndexTime                : int 1542211200
##   .. .. ..$ visibility                 : int 10
##   .. .. ..$ ozone                      : num 251
##   .. .. ..$ temperatureMin             : num 37.2
##   .. .. ..$ temperatureMinTime         : int 1542254400
##   .. .. ..$ temperatureMax             : num 44.7
##   .. .. ..$ temperatureMaxTime         : int 1542171600
##   .. .. ..$ apparentTemperatureMin     : num 29.9
##   .. .. ..$ apparentTemperatureMinTime : int 1542254400
##   .. .. ..$ apparentTemperatureMax     : num 40
##   .. .. ..$ apparentTemperatureMaxTime : int 1542171600
##   .. ..$ :List of 39
##   .. .. ..$ time                       : int 1542258000
##   .. .. ..$ summary                    : chr "Rain until afternoon and breezy in the morning."
##   .. .. ..$ icon                       : chr "rain"
##   .. .. ..$ sunriseTime                : int 1542282824
##   .. .. ..$ sunsetTime                 : int 1542319773
##   .. .. ..$ moonPhase                  : num 0.25
##   .. .. ..$ precipIntensity            : num 0.0785
##   .. .. ..$ precipIntensityMax         : num 0.206
##   .. .. ..$ precipIntensityMaxTime     : int 1542301200
##   .. .. ..$ precipProbability          : num 0.95
##   .. .. ..$ precipType                 : chr "rain"
##   .. .. ..$ temperatureHigh            : num 42.4
##   .. .. ..$ temperatureHighTime        : int 1542322800
##   .. .. ..$ temperatureLow             : num 36.2
##   .. .. ..$ temperatureLowTime         : int 1542369600
##   .. .. ..$ apparentTemperatureHigh    : num 37.6
##   .. .. ..$ apparentTemperatureHighTime: int 1542326400
##   .. .. ..$ apparentTemperatureLow     : num 29.4
##   .. .. ..$ apparentTemperatureLowTime : int 1542369600
##   .. .. ..$ dewPoint                   : num 36.4
##   .. .. ..$ humidity                   : num 0.95
##   .. .. ..$ pressure                   : num 1019
##   .. .. ..$ windSpeed                  : num 10.2
##   .. .. ..$ windGust                   : num 34.7
##   .. .. ..$ windGustTime               : int 1542290400
##   .. .. ..$ windBearing                : int 25
##   .. .. ..$ cloudCover                 : num 0.98
##   .. .. ..$ uvIndex                    : int 3
##   .. .. ..$ uvIndexTime                : int 1542301200
##   .. .. ..$ visibility                 : num 6.48
##   .. .. ..$ ozone                      : num 270
##   .. .. ..$ temperatureMin             : num 33.8
##   .. .. ..$ temperatureMinTime         : int 1542283200
##   .. .. ..$ temperatureMax             : num 42.4
##   .. .. ..$ temperatureMaxTime         : int 1542322800
##   .. .. ..$ apparentTemperatureMin     : num 24
##   .. .. ..$ apparentTemperatureMinTime : int 1542283200
##   .. .. ..$ apparentTemperatureMax     : num 37.6
##   .. .. ..$ apparentTemperatureMaxTime : int 1542326400
##   .. ..$ :List of 39
##   .. .. ..$ time                       : int 1542344400
##   .. .. ..$ summary                    : chr "Mostly cloudy starting in the evening."
##   .. .. ..$ icon                       : chr "partly-cloudy-night"
##   .. .. ..$ sunriseTime                : int 1542369285
##   .. .. ..$ sunsetTime                 : int 1542406135
##   .. .. ..$ moonPhase                  : num 0.28
##   .. .. ..$ precipIntensity            : num 7e-04
##   .. .. ..$ precipIntensityMax         : num 0.0058
##   .. .. ..$ precipIntensityMaxTime     : int 1542348000
##   .. .. ..$ precipProbability          : num 0.25
##   .. .. ..$ precipType                 : chr "rain"
##   .. .. ..$ temperatureHigh            : num 50.6
##   .. .. ..$ temperatureHighTime        : int 1542398400
##   .. .. ..$ temperatureLow             : num 32.9
##   .. .. ..$ temperatureLowTime         : int 1542456000
##   .. .. ..$ apparentTemperatureHigh    : num 50.6
##   .. .. ..$ apparentTemperatureHighTime: int 1542398400
##   .. .. ..$ apparentTemperatureLow     : int 30
##   .. .. ..$ apparentTemperatureLowTime : int 1542452400
##   .. .. ..$ dewPoint                   : num 37.5
##   .. .. ..$ humidity                   : num 0.85
##   .. .. ..$ pressure                   : num 1017
##   .. .. ..$ windSpeed                  : num 7.86
##   .. .. ..$ windGust                   : num 26.5
##   .. .. ..$ windGustTime               : int 1542358800
##   .. .. ..$ windBearing                : int 300
##   .. .. ..$ cloudCover                 : num 0.47
##   .. .. ..$ uvIndex                    : int 4
##   .. .. ..$ uvIndexTime                : int 1542387600
##   .. .. ..$ visibility                 : int 10
##   .. .. ..$ ozone                      : num 264
##   .. .. ..$ temperatureMin             : num 36.2
##   .. .. ..$ temperatureMinTime         : int 1542369600
##   .. .. ..$ temperatureMax             : num 50.6
##   .. .. ..$ temperatureMaxTime         : int 1542398400
##   .. .. ..$ apparentTemperatureMin     : num 29.4
##   .. .. ..$ apparentTemperatureMinTime : int 1542369600
##   .. .. ..$ apparentTemperatureMax     : num 50.6
##   .. .. ..$ apparentTemperatureMaxTime : int 1542398400
##   .. ..$ :List of 38
##   .. .. ..$ time                       : int 1542430800
##   .. .. ..$ summary                    : chr "Mostly cloudy starting in the evening."
##   .. .. ..$ icon                       : chr "partly-cloudy-night"
##   .. .. ..$ sunriseTime                : int 1542455746
##   .. .. ..$ sunsetTime                 : int 1542492499
##   .. .. ..$ moonPhase                  : num 0.31
##   .. .. ..$ precipIntensity            : int 0
##   .. .. ..$ precipIntensityMax         : num 2e-04
##   .. .. ..$ precipIntensityMaxTime     : int 1542466800
##   .. .. ..$ precipProbability          : int 0
##   .. .. ..$ temperatureHigh            : num 57.6
##   .. .. ..$ temperatureHighTime        : int 1542484800
##   .. .. ..$ temperatureLow             : num 35.4
##   .. .. ..$ temperatureLowTime         : int 1542538800
##   .. .. ..$ apparentTemperatureHigh    : num 57.6
##   .. .. ..$ apparentTemperatureHighTime: int 1542484800
##   .. .. ..$ apparentTemperatureLow     : num 32.8
##   .. .. ..$ apparentTemperatureLowTime : int 1542542400
##   .. .. ..$ dewPoint                   : num 36.8
##   .. .. ..$ humidity                   : num 0.78
##   .. .. ..$ pressure                   : num 1024
##   .. .. ..$ windSpeed                  : num 2.02
##   .. .. ..$ windGust                   : num 5.86
##   .. .. ..$ windGustTime               : int 1542481200
##   .. .. ..$ windBearing                : int 274
##   .. .. ..$ cloudCover                 : num 0.23
##   .. .. ..$ uvIndex                    : int 4
##   .. .. ..$ uvIndexTime                : int 1542474000
##   .. .. ..$ visibility                 : int 10
##   .. .. ..$ ozone                      : num 268
##   .. .. ..$ temperatureMin             : num 32.9
##   .. .. ..$ temperatureMinTime         : int 1542456000
##   .. .. ..$ temperatureMax             : num 57.6
##   .. .. ..$ temperatureMaxTime         : int 1542484800
##   .. .. ..$ apparentTemperatureMin     : int 30
##   .. .. ..$ apparentTemperatureMinTime : int 1542452400
##   .. .. ..$ apparentTemperatureMax     : num 57.6
##   .. .. ..$ apparentTemperatureMaxTime : int 1542484800
##   .. ..$ :List of 38
##   .. .. ..$ time                       : int 1542517200
##   .. .. ..$ summary                    : chr "Mostly cloudy until evening."
##   .. .. ..$ icon                       : chr "partly-cloudy-day"
##   .. .. ..$ sunriseTime                : int 1542542207
##   .. .. ..$ sunsetTime                 : int 1542578864
##   .. .. ..$ moonPhase                  : num 0.35
##   .. .. ..$ precipIntensity            : int 0
##   .. .. ..$ precipIntensityMax         : num 2e-04
##   .. .. ..$ precipIntensityMaxTime     : int 1542531600
##   .. .. ..$ precipProbability          : int 0
##   .. .. ..$ temperatureHigh            : num 61
##   .. .. ..$ temperatureHighTime        : int 1542567600
##   .. .. ..$ temperatureLow             : num 38.8
##   .. .. ..$ temperatureLowTime         : int 1542628800
##   .. .. ..$ apparentTemperatureHigh    : num 61
##   .. .. ..$ apparentTemperatureHighTime: int 1542567600
##   .. .. ..$ apparentTemperatureLow     : num 34.4
##   .. .. ..$ apparentTemperatureLowTime : int 1542628800
##   .. .. ..$ dewPoint                   : num 40.3
##   .. .. ..$ humidity                   : num 0.8
##   .. .. ..$ pressure                   : num 1024
##   .. .. ..$ windSpeed                  : num 4.32
##   .. .. ..$ windGust                   : num 13.7
##   .. .. ..$ windGustTime               : int 1542567600
##   .. .. ..$ windBearing                : int 211
##   .. .. ..$ cloudCover                 : num 0.77
##   .. .. ..$ uvIndex                    : int 3
##   .. .. ..$ uvIndexTime                : int 1542560400
##   .. .. ..$ visibility                 : int 10
##   .. .. ..$ ozone                      : num 272
##   .. .. ..$ temperatureMin             : num 35.4
##   .. .. ..$ temperatureMinTime         : int 1542538800
##   .. .. ..$ temperatureMax             : num 61
##   .. .. ..$ temperatureMaxTime         : int 1542567600
##   .. .. ..$ apparentTemperatureMin     : num 32.8
##   .. .. ..$ apparentTemperatureMinTime : int 1542542400
##   .. .. ..$ apparentTemperatureMax     : num 61
##   .. .. ..$ apparentTemperatureMaxTime : int 1542567600
##   .. ..$ :List of 38
##   .. .. ..$ time                       : int 1542603600
##   .. .. ..$ summary                    : chr "Partly cloudy in the morning."
##   .. .. ..$ icon                       : chr "partly-cloudy-night"
##   .. .. ..$ sunriseTime                : int 1542628668
##   .. .. ..$ sunsetTime                 : int 1542665232
##   .. .. ..$ moonPhase                  : num 0.38
##   .. .. ..$ precipIntensity            : int 0
##   .. .. ..$ precipIntensityMax         : num 1e-04
##   .. .. ..$ precipIntensityMaxTime     : int 1542618000
##   .. .. ..$ precipProbability          : int 0
##   .. .. ..$ temperatureHigh            : num 58.2
##   .. .. ..$ temperatureHighTime        : int 1542657600
##   .. .. ..$ temperatureLow             : num 35
##   .. .. ..$ temperatureLowTime         : int 1542711600
##   .. .. ..$ apparentTemperatureHigh    : num 58.2
##   .. .. ..$ apparentTemperatureHighTime: int 1542657600
##   .. .. ..$ apparentTemperatureLow     : num 30.7
##   .. .. ..$ apparentTemperatureLowTime : int 1542711600
##   .. .. ..$ dewPoint                   : num 37.7
##   .. .. ..$ humidity                   : num 0.73
##   .. .. ..$ pressure                   : num 1023
##   .. .. ..$ windSpeed                  : num 3.51
##   .. .. ..$ windGust                   : num 24
##   .. .. ..$ windGustTime               : int 1542628800
##   .. .. ..$ windBearing                : int 293
##   .. .. ..$ cloudCover                 : num 0.1
##   .. .. ..$ uvIndex                    : int 3
##   .. .. ..$ uvIndexTime                : int 1542643200
##   .. .. ..$ visibility                 : int 10
##   .. .. ..$ ozone                      : num 286
##   .. .. ..$ temperatureMin             : num 38.7
##   .. .. ..$ temperatureMinTime         : int 1542686400
##   .. .. ..$ temperatureMax             : num 58.2
##   .. .. ..$ temperatureMaxTime         : int 1542657600
##   .. .. ..$ apparentTemperatureMin     : num 34.4
##   .. .. ..$ apparentTemperatureMinTime : int 1542628800
##   .. .. ..$ apparentTemperatureMax     : num 58.2
##   .. .. ..$ apparentTemperatureMaxTime : int 1542657600
##   .. ..$ :List of 38
##   .. .. ..$ time                       : int 1542690000
##   .. .. ..$ summary                    : chr "Clear throughout the day."
##   .. .. ..$ icon                       : chr "clear-day"
##   .. .. ..$ sunriseTime                : int 1542715128
##   .. .. ..$ sunsetTime                 : int 1542751601
##   .. .. ..$ moonPhase                  : num 0.41
##   .. .. ..$ precipIntensity            : int 0
##   .. .. ..$ precipIntensityMax         : num 1e-04
##   .. .. ..$ precipIntensityMaxTime     : int 1542718800
##   .. .. ..$ precipProbability          : int 0
##   .. .. ..$ temperatureHigh            : num 52.2
##   .. .. ..$ temperatureHighTime        : int 1542740400
##   .. .. ..$ temperatureLow             : num 38.5
##   .. .. ..$ temperatureLowTime         : int 1542801600
##   .. .. ..$ apparentTemperatureHigh    : num 52.2
##   .. .. ..$ apparentTemperatureHighTime: int 1542740400
##   .. .. ..$ apparentTemperatureLow     : num 38.1
##   .. .. ..$ apparentTemperatureLowTime : int 1542772800
##   .. .. ..$ dewPoint                   : num 33.2
##   .. .. ..$ humidity                   : num 0.71
##   .. .. ..$ pressure                   : num 1028
##   .. .. ..$ windSpeed                  : num 3.68
##   .. .. ..$ windGust                   : num 21.8
##   .. .. ..$ windGustTime               : int 1542690000
##   .. .. ..$ windBearing                : int 55
##   .. .. ..$ cloudCover                 : int 0
##   .. .. ..$ uvIndex                    : int 3
##   .. .. ..$ uvIndexTime                : int 1542729600
##   .. .. ..$ visibility                 : int 10
##   .. .. ..$ ozone                      : num 299
##   .. .. ..$ temperatureMin             : num 35
##   .. .. ..$ temperatureMinTime         : int 1542711600
##   .. .. ..$ temperatureMax             : num 52.2
##   .. .. ..$ temperatureMaxTime         : int 1542740400
##   .. .. ..$ apparentTemperatureMin     : num 30.7
##   .. .. ..$ apparentTemperatureMinTime : int 1542711600
##   .. .. ..$ apparentTemperatureMax     : num 52.2
##   .. .. ..$ apparentTemperatureMaxTime : int 1542740400
##  $ flags    :List of 3
##   ..$ sources        : chr [1:11] "nearest-precip" "nwspa" "cmc" "gfs" ...
##   ..$ nearest-station: num 0.81
##   ..$ units          : chr "us"
##  $ offset   : int -5
```

---

## Complex `list`s - `str`

.pull-left[

```r
str(durham, max.level=1)
```

```
## List of 9
##  $ latitude : num 36
##  $ longitude: num -78.9
##  $ timezone : chr "America/New_York"
##  $ currently:List of 18
##  $ minutely :List of 3
##  $ hourly   :List of 3
##  $ daily    :List of 3
##  $ flags    :List of 3
##  $ offset   : int -5
```
]

.pull-right[

```r
str(durham$currently, max.level=1)
```

```
## List of 18
##  $ time                : int 1542120235
##  $ summary             : chr "Mostly Cloudy"
##  $ icon                : chr "partly-cloudy-day"
##  $ nearestStormDistance: int 0
##  $ precipIntensity     : int 0
##  $ precipProbability   : int 0
##  $ temperature         : num 44.4
##  $ apparentTemperature : num 44.4
##  $ dewPoint            : num 44.4
##  $ humidity            : int 1
##  $ pressure            : num 1017
##  $ windSpeed           : num 1.98
##  $ windGust            : num 3.07
##  $ windBearing         : int 331
##  $ cloudCover          : num 0.87
##  $ uvIndex             : int 2
##  $ visibility          : num 8.94
##  $ ozone               : num 232
```
]

---

## Complex `list`s - `View`


```r
View(durham)
```

.pull-left[
&lt;img src="imgs/View1.png" width="1461" /&gt;
]

.pull-right[
&lt;img src="imgs/View2.png" width="1461" /&gt;
]



---

## purrr

.pull-left13[
&lt;img src="imgs/purrr.png" width="2941" /&gt;
]

.pull-right23[
`purrr` is a tidyverse package which improves the functional programming tools in R (i.e. `lapply`, `sapply`, etc.). It focuses on providing *pure* and *type stable* functions as well as several convenient shortcuts for common tasks.
]

--

&lt;br/&gt;

Key functions:

&lt;div&gt;
.pull-left[
* `map()`

* `map_lgl()`

* `map_int()`

* `map_dbl()`
]

.pull-right[
* `map_chr()`

* `map_df()` / `map_dfr()`

* `map_dfc()`

* `walk()`
]
&lt;/div&gt;

---

## Type Consistency

R is a weakly / dynamically typed language which means there is no simple way to define a function which enforces the argument or return types of a function.

This flexibility can be useful at times, but often it makes it hard to reason about your code and requires more verbose code to handle edge cases.

.small[

```r
x = list(1:3, 4:6, 7:9)
```

.pull-left[

```r
sapply(x, mean)
```

```
## [1] 2 5 8
```

```r
lapply(x, mean)
```

```
## [[1]]
## [1] 2
## 
## [[2]]
## [1] 5
## 
## [[3]]
## [1] 8
```
]

.pull-right[

```r
map_dbl(x, mean)
```

```
## [1] 2 5 8
```

```r
map_chr(x, mean)
```

```
## [1] "2.000000" "5.000000" "8.000000"
```

```r
map_int(x, mean)
```

```
## Error: Can't coerce element 1 from a double to a integer
```
] ]

---

## Purrr shortcut - Lookups

Very often we want to extract only certain (named) values from a list, `purrr` provides a shortcut for this operation by providing either a character or numeric value instead of a function to the `map` function.

.small[

.pull-left[

```r
json = jsonlite::fromJSON(
'{
  "bookList": [
    {"title": "The Cat in the Hat",
     "author": "Dr. Seuss",
     "price": 6.99},
    {"title": "Edgar Gets Ready for Bed",
     "author": ["Jennifer Adams", "Ron Stucki"],
     "price": 9.99},
    {"title": "\\"More More More\\", Said the Baby",
     "author": "Vera B Williams",
     "price": 7.19}
  ]
}', simplifyVector = FALSE
)
```
]

.pull-right[

```r
str(json)
```

```
## List of 1
##  $ bookList:List of 3
##   ..$ :List of 3
##   .. ..$ title : chr "The Cat in the Hat"
##   .. ..$ author: chr "Dr. Seuss"
##   .. ..$ price : num 6.99
##   ..$ :List of 3
##   .. ..$ title : chr "Edgar Gets Ready for Bed"
##   .. ..$ author:List of 2
##   .. .. ..$ : chr "Jennifer Adams"
##   .. .. ..$ : chr "Ron Stucki"
##   .. ..$ price : num 9.99
##   ..$ :List of 3
##   .. ..$ title : chr "\"More More More\", Said the Baby"
##   .. ..$ author: chr "Vera B Williams"
##   .. ..$ price : num 7.19
```
]
]


---

## Purrr shortcut - Lookups


```r
map_chr(json$bookList, "title")
```

```
## [1] "The Cat in the Hat"                "Edgar Gets Ready for Bed"         
## [3] "\"More More More\", Said the Baby"
```

--


```r
map_dbl(json$bookList, "price")
```

```
## [1] 6.99 9.99 7.19
```

--


```r
map_chr(json$bookList, "author")
```

```
## Error: Result 2 is not a length 1 atomic vector
```

--


```r
map_chr(json$bookList, list("author", 1))
```

```
## [1] "Dr. Seuss"       "Jennifer Adams"  "Vera B Williams"
```

---
class: middle

.center[
# Live Demo

## Putting `purrr` to work

#### [http://bit.ly/Rundel-DVS_darksky](http://bit.ly/Rundel-DVS_darksky)
]

---

## Further Reading

* Tidy Data
  - R for Data Science [tidy data chapter](https://r4ds.had.co.nz/tidy-data.html)
  - Hadley's [J. Stat Soft Paper (2014)](http://www.jstatsoft.org/v59/i10/)

* Rvest 
  - [Selector Gadget Vignette](https://cran.r-project.org/web/packages/rvest/vignettes/selectorgadget.html)

* purrr
  - RStudio's [purrr cheatsheet](https://github.com/rstudio/cheatsheets/raw/master/purrr.pdf)
  - Jenny Bryan's [purrr tutorial](https://jennybc.github.io/purrr-tutorial/)
  - Advanced R - Functional Programming Chapters: [Functional Programming](http://adv-r.had.co.nz/Functional-programming.html), [Functionals](http://adv-r.had.co.nz/Functionals.html), [Function Operators](Function operators)
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="https://use.fontawesome.com/releases/v5.5.0/js/all.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script>
(function() {
  var i, text, code, codes = document.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
})();
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
